(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){e.exports={main:"constructor-page_main__2cmA2"}},116:function(e,t,a){e.exports={list:"ingredient-variants_list__X2Scw",card:"ingredient-variants_card__1NQkn",image:"ingredient-variants_image__1cNPR",priceArea:"ingredient-variants_priceArea__3cUxI",price:"ingredient-variants_price__3hiL9",title:"ingredient-variants_title__1dSsn"}},118:function(e,t,a){e.exports={element:"filling-ingredient_element__1mGml"}},119:function(e,t,a){e.exports={overlay:"modal-overlay_overlay__3nb6x"}},120:function(e,t,a){e.exports=a.p+"static/media/done.04891082.png"},122:function(e,t,a){e.exports={main:"order-details-page_main__K1Eiu"}},127:function(e,t,a){e.exports=a(255)},132:function(e,t,a){},23:function(e,t,a){e.exports={menu:"profile-menu_menu__1lTJO",nav_list:"profile-menu_nav_list__2rSE3",nav_element:"profile-menu_nav_element__2HwXo",nav_link:"profile-menu_nav_link__21S-5",active_nav_link:"profile-menu_active_nav_link__RrhjD",nav_button:"profile-menu_nav_button__2xYcm",info:"profile-menu_info__1dqSP"}},24:function(e,t,a){e.exports={card:"ingredient-details_card__1uGau",image:"ingredient-details_image__1gJT6",nutritionalValue:"ingredient-details_nutritionalValue__2VXlS",component:"ingredient-details_component__h2iHZ",componentName:"ingredient-details_componentName__1obsM"}},255:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(41),i=a.n(c),s=(a(132),function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,261)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)})}),o=a(47),l=a(10),u=function(){return Object(o.b)()},m=o.c,d=a(3),_=a(28),p=a.n(_),f=a(1);function E(){var e=Object(d.h)().pathname;return r.a.createElement("header",{className:"mt-10 ".concat(p.a.header)},r.a.createElement("nav",{className:"pb-4 pt-4 ".concat(p.a.menu)},r.a.createElement("div",{className:p.a.menuLeftColumn},r.a.createElement(l.c,{to:"/",exact:!0,className:"text text_type_main-default pl-5 pr-5 pt-4 pb-4 ".concat(p.a.link),activeClassName:p.a.active_nav_link},r.a.createElement(f.BurgerIcon,{type:"/"===e?"primary":"secondary"}),r.a.createElement("span",{className:"pl-2"},"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440")),r.a.createElement(l.c,{to:"/feed",exact:!0,className:"text text_type_main-default pl-5 pr-5 pt-4 pb-4 ".concat(p.a.link),activeClassName:p.a.active_nav_link},r.a.createElement(f.ListIcon,{type:"/orders-history"===e?"primary":"secondary"}),r.a.createElement("span",{className:"pl-2"},"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))),r.a.createElement(l.c,{to:"/profile",className:"text text_type_main-default pl-5 pr-5 pt-4 pb-4 ".concat(p.a.link),activeClassName:p.a.active_nav_link},r.a.createElement(f.ProfileIcon,{type:"primary"}),r.a.createElement("span",{className:"pl-2"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"))),r.a.createElement(l.c,{to:"/"},r.a.createElement("div",{className:p.a.logo},r.a.createElement(f.Logo,null))))}var g=a(57),h=function(e){var t=e.children,a=Object(g.a)(e,["children"]),n=(Object(d.h)(),m(function(e){return e.auth}).user);return m(function(e){return e.auth}).isAuthChecked?r.a.createElement(d.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(d.a,{to:{pathname:"/login",state:{from:a}}})}})):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")},b=a(5),v=a(9),y=a.n(v),O=a(14),x=a.n(O),N=a(6),C=a(25),k="https://norma.nomoreparties.space/api",j="wss://norma.nomoreparties.space",I=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function S(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}function T(e,t,a){var n=(a=a||{}).expires;if("number"==typeof n&&n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=a.expires=r}n&&n instanceof Date&&n.toUTCString&&(a.expires=n.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var i in a){c+="; "+i;var s=a[i];!0!==s&&(c+="="+s)}document.cookie=c}function L(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var A=function(){var e=Object(C.a)(x.a.mark(function e(t){var a,n,r,c,i,s,o,l,u,m=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:{},e.prev=1,e.next=4,fetch(t,a);case 4:return n=e.sent,e.next=7,S(n);case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),c=e.t0,e.next=16,c.json();case 16:if("jwt expired"!==e.sent.message){e.next=40;break}return i=localStorage.getItem("refreshToken"),e.next=21,d=i,fetch("".concat(k,"/auth/token"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:d})}).then(S);case 21:return s=e.sent,e.next=24,s.json();case 24:if((o=e.sent).success){e.next=29;break}return e.abrupt("return",Promise.reject(o));case 29:return localStorage.setItem("refreshToken",o.refreshToken),T("token",o.accessToken.split("Bearer ")[1]),e.next=33,fetch(t,Object(N.a)({},a,{headers:Object(N.a)({},a.headers,{Authotization:o.accessToken})}));case 33:return l=e.sent,e.next=36,S(l);case 36:return u=e.sent,e.abrupt("return",u);case 38:e.next=41;break;case 40:return e.abrupt("return",Promise.reject(c));case 41:case"end":return e.stop()}var d},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),w={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",created:"\u0421\u043e\u0437\u0434\u0430\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"},R="GET_ALL_INGREDIENTS",F="GET_ALL_INGREDIENTS_SUCCESS",D="GET_ALL_INGREDIENTS_FAILED",M="REORDER_INGREDIENT",B="ADD_TO_CONSTRUCTOR",P="DELETE_FROM_CONSTRUCTOR",U="LOGIN",G="LOGIN_SUCCESS",z="LOGIN_FAILED",J="LOGOUT",W="LOGOUT_SUCCESS",V="LOGOUT_FAILED",X="GET_ORDER",Y="GET_ORDER_SUCCESS",Q="GET_ORDER_FAILED",q="CLOSE_ORDER",H="RECOVER_PASSWORD",K="RECOVER_PASSWORD_SUCCESS",Z="RECOVER_PASSWORD_FAILED",$="RESET_PASSWORD",ee="RESET_PASSWORD_SUCCESS",te="RESET_PASSWORD_FAILED",ae="REGISTER",ne="REGISTER_SUCCESS",re="REGISTER_FAILED",ce="GET_USER",ie="GET_USER_SUCCESS",se="GET_USER_FAILED",oe="EDIT_USER",le="EDIT_USER_SUCCESS",ue="EDIT_USER_FAILED";var me=function(e,t){return function(a){a({type:U,isLoading:!0,isFailed:!1,isAuth:!1}),fetch("".concat(k,"/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e,password:t})}).then(function(e){return S(e)}).then(function(e){return a(function(e){return{type:G,isLoading:!1,isFailed:!1,user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuth:!0,isLogoutChecked:!0}}(e))}).catch(function(e){return a({type:z,isLoading:!1,isFailed:!0,isAuth:!1,isLogoutChecked:!0})})}};function de(){var e=m(function(e){return e.auth}).user,t=r.a.useState(""),a=Object(b.a)(t,2),c=a[0],i=a[1],s=r.a.useState(""),o=Object(b.a)(s,2),l=o[0],_=o[1],p=u(),E=Object(d.g)(),g=Object(d.h)(),h=Object(n.useCallback)(function(){E.replace({pathname:"/register"})},[E]),v=Object(n.useCallback)(function(){E.replace({pathname:"/forgot-password"})},[E]);var O=(g.state||{from:{pathname:"/"}}).from;return m(function(e){return e.auth}).isLogoutChecked?e?r.a.createElement(d.a,{to:O}):r.a.createElement("main",{className:y.a.main},r.a.createElement("h1",{className:"text text_type_main-medium"},"\u0412\u0445\u043e\u0434"),r.a.createElement("form",{className:y.a.form,action:"",onSubmit:function(e){e.preventDefault(),p(me(c,l))}},r.a.createElement("fieldset",{className:y.a.fieldset},r.a.createElement(f.EmailInput,{onChange:function(e){return i(e.target.value)},value:c,name:"email"}),r.a.createElement(f.PasswordInput,{onChange:function(e){return _(e.target.value)},value:l,name:"password"})),r.a.createElement(f.Button,{type:"primary",size:"medium"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("div",{className:y.a.additional_actions},r.a.createElement("div",{className:y.a.additional_action},r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"),r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:h},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("div",{className:y.a.additional_action},r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:v},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")))):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")}var _e=a(260),pe=a(125),fe=a(115),Ee=a.n(fe),ge=a(59),he=a(58),be=a.n(he),ve=a(116),ye=a.n(ve),Oe=a(263),xe=a(38),Ne=a.n(xe),Ce=function(e){var t=e.ingredient,a=m(function(e){return e.constructorIngredients.ingredientsCount}),n=m(function(e){return e.constructorIngredients.ingredients.bun}),c=t._id;function i(){if(null!==n&&n._id===t._id){return 1}return void 0===a.find(function(e){return e.itemId===t._id})?null:a.find(function(e){return e.itemId===t._id}).count}var s=i(),o=(u(),Object(d.h)()),_=Object(Oe.a)({type:"ingredient",item:t}),p=Object(b.a)(_,2)[1];return r.a.createElement("li",{className:" ".concat(Ne.a.card),ref:p,draggable:!0},r.a.createElement(l.b,{className:Ne.a.link,to:{pathname:"/ingredients/".concat(c),state:{background:o}}},r.a.createElement("img",{className:"ml-4 mr-4 ".concat(Ne.a.image),src:t.image}),s&&r.a.createElement(f.Counter,{count:i(),size:"default"}),r.a.createElement("div",{className:Ne.a.priceArea},r.a.createElement("p",{className:"text text_type_digits-default ".concat(Ne.a.price)},t.price),r.a.createElement(f.CurrencyIcon,{type:"primary"})),r.a.createElement("p",{className:"text text_type_main-default ".concat(Ne.a.title)},t.name)))},ke=Object(n.forwardRef)(function(e,t){var a=e.listOfIngredients;return r.a.createElement("section",{id:e.titleId},r.a.createElement("h3",{className:"text text_type_main-medium"},e.ingredientName),r.a.createElement("ul",{className:"pl-4 pr-4 pb-10 pt-6 ".concat(ye.a.list),ref:t},a.map(function(e){return r.a.createElement(Ce,{key:e._id,ingredient:e})})))});function je(){u();var e=r.a.useState("buns"),t=Object(b.a)(e,2),a=t[0],c=t[1];function i(e){c(e);var t=document.getElementById(e);null!==t&&t.scrollIntoView({behavior:"smooth",block:"start"})}var s=Object(ge.a)({threshold:.1}),o=Object(b.a)(s,2),l=o[0],d=o[1],_=Object(ge.a)({threshold:.1}),p=Object(b.a)(_,2),E=p[0],g=p[1],h=Object(ge.a)({threshold:.1}),v=Object(b.a)(h,2),y=v[0],O=v[1];Object(n.useEffect)(function(){d?c("buns"):g?c("sauces"):O&&c("mains")},[d,g,O]);var x,N,C,k=m(function(e){return e.allIngredients.items});return null!==k&&(x=k.filter(function(e){return"bun"===e.type}),N=k.filter(function(e){return"sauce"===e.type}),C=k.filter(function(e){return"main"===e.type})),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:be.a.section},r.a.createElement("h2",{className:"text text_type_main-large mb-5 mt-10"},"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"),r.a.createElement("nav",{className:"mb-10 ".concat(be.a.menu)},r.a.createElement(f.Tab,{value:"buns",active:"buns"===a,onClick:i},"\u0411\u0443\u043b\u043a\u0438"),r.a.createElement(f.Tab,{value:"sauces",active:"sauces"===a,onClick:i},"\u0421\u043e\u0443\u0441\u044b"),r.a.createElement(f.Tab,{value:"mains",active:"mains"===a,onClick:i},"\u041d\u0430\u0447\u0438\u043d\u043a\u0438")),x&&N&&C&&r.a.createElement("article",{className:be.a.ingredients},r.a.createElement(ke,{ingredientName:"\u0411\u0443\u043b\u043a\u0438",listOfIngredients:x,titleId:"buns",ref:l}),r.a.createElement(ke,{ingredientName:"\u0421\u043e\u0443\u0441\u044b",listOfIngredients:N,titleId:"sauces",ref:E}),r.a.createElement(ke,{ingredientName:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",listOfIngredients:C,titleId:"mains",ref:y}))))}var Ie=a(264),Se=a(39),Te=a.n(Se),Le=a(118),Ae=a.n(Le),we=a(265);var Re=function(e){var t=e.item,a=e.index,c=u(),i=Object(n.useRef)(null),s=t.uId,o=Object(Ie.a)({accept:"fillings",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(i.current){var n=e.index,r=a;if(n!==r){var s=i.current.getBoundingClientRect(),o=(s.bottom-s.top)/2,l=t.getClientOffset().y-s.top;n<r&&l<o||n>r&&l>o||(c(function(e,t){return{type:M,dragIndex:e,hoverIndex:t}}(n,r)),e.index=r)}}}}),l=Object(b.a)(o,2),m=l[0].handlerId,d=l[1],_=Object(Oe.a)({type:"fillings",item:function(){return{id:s,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),p=Object(b.a)(_,2),E=p[0].isDragging?0:1;return(0,p[1])(d(i)),r.a.createElement("li",{className:Ae.a.element,draggable:!0,ref:i,"data-handler-id":m,style:{opacity:E}},r.a.createElement(f.DragIcon,{type:"primary"}),r.a.createElement(f.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return c(function(e,t){return{type:P,item:e,key:t}}(t,a))}}))},Fe=a(60),De=a.n(Fe),Me=a(119),Be=a.n(Me),Pe=function(e){var t=e.onOverlayClick;return r.a.createElement("div",{className:Be.a.overlay,onClick:t})},Ue=document.querySelector("#modals"),Ge=function(e){var t=e.title,a=e.onClose,c=e.children;function s(){a()}function o(e){"Escape"===e.key&&s()}return Object(n.useEffect)(function(){return document.addEventListener("keydown",o),function(){document.removeEventListener("keydown",o)}},[]),i.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:De.a.modal},r.a.createElement("div",{className:"pt-10 pr-10 pl-10 ".concat(De.a.header)},r.a.createElement("h3",{className:"text text_type_main-large ".concat(De.a.title)},t),r.a.createElement("div",{onClick:function(){s()}},r.a.createElement(f.CloseIcon,{type:"primary"}))),c),r.a.createElement(Pe,{onOverlayClick:s})),Ue)},ze=a(48),Je=a.n(ze),We=a(120),Ve=a.n(We),Xe=function(e){var t=e.orderNumber;return r.a.createElement("article",{className:Je.a.card},r.a.createElement("p",{className:"text text_type_digits-large ".concat(Je.a.orderId)},t),r.a.createElement("span",{className:"mt-8 text text_type_main-medium"},"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"),r.a.createElement("img",{className:"mt-15 mb-15 ".concat(Je.a.image),src:Ve.a}),r.a.createElement("div",{className:"mb-30 ".concat(Je.a.info)},r.a.createElement("p",{className:"text text_type_main-default"},"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"),r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438")))};var Ye=function(e){return function(t){t({type:X,isOrderModalClosed:!0,isOrderSent:!0,isOrderRejected:!1}),fetch("".concat(k,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+L("token")},body:JSON.stringify({ingredients:e})}).then(function(e){return S(e)}).then(function(e){t(function(e){return{type:Y,isOrderModalClosed:!1,isOrderSent:!1,isOrderRejected:!1,number:e.order.number}}(e))}).catch(function(e){console.log(e,e.status),t({type:Q,isOrderModalClosed:!0,isOrderSent:!1,isOrderRejected:!0})})}};function Qe(){var e=m(function(e){return e.constructorIngredients.ingredients.fillings}),t=m(function(e){return e.constructorIngredients.ingredients.bun}),a=null===t?0:2*t.price,c=m(function(e){return e.order.isOrderRejected}),i=m(function(e){return e.order.isOrderModalClosed}),s=m(function(e){return e.order.number});var o=u(),l=Object(n.useMemo)(function(){return e.reduce(function(e,t){return e+t.price},a)},[e]),_=Object(Ie.a)({accept:"ingredient",drop:function(e){o(function(e){return{type:B,item:e,uId:Object(we.a)()}}(e))}}),p=Object(b.a)(_,2)[1],E=m(function(e){return e.auth}),g=E.isAuth,h=E.isAuthChecked,v=Object(d.g)();function y(){!g&&h?v.replace({pathname:"/login"}):o(Ye(function(){var a=[];return null!==t&&a.push(t._id),e.forEach(function(e){a.push(e._id)}),null!==t&&a.push(t._id),a}()))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"".concat(Te.a.section," pt-20")},r.a.createElement("article",{className:"".concat(Te.a.compositionArea," pt-5"),ref:p},t&&r.a.createElement(f.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(t.name," (\u0432\u0435\u0440\u0445)"),price:t.price,thumbnail:t.image}),r.a.createElement("ul",{className:Te.a.compositionChangebleList},e&&e.map(function(e,t){return r.a.createElement(Re,{item:e,index:t,key:e.uId})})),t&&r.a.createElement(f.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(t.name," (\u043d\u0438\u0437)"),price:t.price,thumbnail:t.image})),r.a.createElement("article",{className:"mt-10 ".concat(Te.a.info)},r.a.createElement("div",{className:Te.a.priceArea},r.a.createElement("p",{className:"text text_type_digits-medium"},l),r.a.createElement("div",{className:Te.a.currentIcon},r.a.createElement(f.CurrencyIcon,{type:"primary"}))),r.a.createElement(f.Button,{type:"primary",size:"large",onClick:function(){y()}},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))),!c&&!i&&r.a.createElement(Ge,{title:"",onClose:function(){return o({type:q,isOrderModalClosed:!0,number:null})}},r.a.createElement(Xe,{orderNumber:s})))}function qe(){var e=m(function(e){return e.allIngredients}),t=e.isLoading,a=e.isFailed,n=m(function(e){return e.allIngredients.items});return r.a.createElement("main",{className:Ee.a.main},r.a.createElement(_e.a,{backend:pe.a},t&&r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435..."),a&&r.a.createElement("p",{className:"text text_type_main-medium"},"\u041d\u0435 \u0443\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443"),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(je,null),r.a.createElement(Qe,null))))}var He=function(e,t,a){return function(n){n({type:ae,isLoading:!0,isFailed:!1,isAuth:!1}),fetch("".concat(k,"/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:t,password:a,name:e})}).then(function(e){return S(e)}).then(function(e){return n(function(e){return{type:ne,isLoading:!1,isFailed:!1,user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuth:!0}}(e))}).catch(function(e){return n({type:re,isLoading:!1,isFailed:!0,isAuth:!1})})}};function Ke(){var e=m(function(e){return e.auth}).user,t=r.a.useState(""),a=Object(b.a)(t,2),c=a[0],i=a[1],s=r.a.useState(""),o=Object(b.a)(s,2),l=o[0],_=o[1],p=r.a.useState(""),E=Object(b.a)(p,2),g=E[0],h=E[1],v=Object(n.useRef)(null),O=u(),x=Object(d.g)(),N=Object(n.useCallback)(function(){x.replace({pathname:"/login"})},[x]);return e?r.a.createElement(d.a,{to:{pathname:"/"}}):r.a.createElement("main",{className:y.a.main},r.a.createElement("h1",{className:"text text_type_main-medium"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:y.a.form,action:"",onSubmit:function(e){e.preventDefault(),O(He(c,l,g))}},r.a.createElement("fieldset",{className:y.a.fieldset},r.a.createElement(f.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return i(e.target.value)},icon:"CurrencyIcon",value:c,name:"name",error:!1,ref:v,onIconClick:function(){},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),r.a.createElement(f.EmailInput,{onChange:function(e){return _(e.target.value)},value:l,name:"email"}),r.a.createElement(f.PasswordInput,{onChange:function(e){return h(e.target.value)},value:g,name:"password"})),r.a.createElement(f.Button,{type:"primary",size:"medium"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("div",{className:y.a.additional_actions},r.a.createElement("div",{className:y.a.additional_action},r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"),r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:N},"\u0412\u043e\u0439\u0442\u0438"))))}var Ze=function(e){return function(t){t({type:H}),fetch("".concat(k,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:e})}).then(S).then(function(e){return t({type:K})}).catch(function(e){return t({type:Z})})}},$e=function(e,t){return function(a){a({type:$}),fetch("".concat(k,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:e,token:t})}).then(S).then(function(e){return a({type:ee})}).catch(function(e){return a({type:te})})}};function et(){var e=m(function(e){return e.auth}).user,t=Object(n.useState)(""),a=Object(b.a)(t,2),c=a[0],i=a[1],s=Object(n.useRef)(null),o=Object(n.useState)(!0),l=Object(b.a)(o,2),_=l[0],p=l[1];var E=Object(d.g)(),g=u(),h=Object(d.h)(),v=Object(n.useCallback)(function(){E.replace({pathname:"/login"})},[E]);return e?r.a.createElement(d.a,{to:{pathname:"/"}}):r.a.createElement("main",{className:y.a.main},r.a.createElement("h1",{className:"text text_type_main-medium"},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement("form",{className:y.a.form,action:"",onSubmit:function(e){e.preventDefault(),Object(C.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Ze(c));case 2:E.replace({pathname:"/reset-password",state:{from:h}});case 3:case"end":return e.stop()}},e)}))()}},r.a.createElement("fieldset",{className:y.a.fieldset},r.a.createElement(f.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){i(e.target.value),I.test(c)?p(!1):p(!0)},icon:"EditIcon",value:c,name:"name",error:!1,ref:s,onIconClick:function(){},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})),r.a.createElement(f.Button,{type:"primary",size:"medium",disabled:_},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c")),r.a.createElement("div",{className:y.a.additional_actions},r.a.createElement("div",{className:y.a.additional_action},r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:v},"\u0412\u043e\u0439\u0442\u0438"))))}function tt(){var e=m(function(e){return e.auth}).user,t=r.a.useState(""),a=Object(b.a)(t,2),c=a[0],i=a[1],s=r.a.useState(""),o=Object(b.a)(s,2),l=o[0],_=o[1],p=Object(n.useRef)(null),E=function(){},g=u(),h=Object(d.g)(),v=(Object(d.h)().state||{from:{pathname:"/"}}).from;if("/forgot-password"!==v.pathname)return r.a.createElement(d.a,{to:v});var O=Object(n.useCallback)(function(){h.replace({pathname:"/login"})},[h]);return e?r.a.createElement(d.a,{to:{pathname:"/"}}):r.a.createElement("main",{className:y.a.main},r.a.createElement("h1",{className:"text text_type_main-medium"},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement("form",{className:y.a.form,action:"",onSubmit:function(e){e.preventDefault(),Object(C.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g($e(c,l));case 2:h.replace({pathname:"/profile"});case 3:case"end":return e.stop()}},e)}))()}},r.a.createElement("fieldset",{className:y.a.fieldset},r.a.createElement(f.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return i(e.target.value)},icon:"ShowIcon",value:c,name:"name",error:!1,ref:p,onIconClick:E,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),r.a.createElement(f.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return _(e.target.value)},icon:"EditIcon",value:l,name:"name",error:!1,ref:p,onIconClick:E,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})),r.a.createElement(f.Button,{type:"primary",size:"medium"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement("div",{className:y.a.additional_actions},r.a.createElement("div",{className:y.a.additional_action},r.a.createElement("p",{className:"text text_type_main-default text_color_inactive"},"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:O},"\u0412\u043e\u0439\u0442\u0438"))))}var at=a(61),nt=a.n(at),rt=a(23),ct=a.n(rt);var it=function(){return function(e){e({type:J,isLogoutChecked:!1}),fetch("".concat(k,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(S).then(function(t){e({type:W,user:null,accessToken:null,isAuth:!1,isAuthChecked:!0,isLogoutChecked:!0})}).catch(function(t){e({type:V,isLogoutChecked:!0})})}};function st(){var e=Object(d.g)(),t=u(),a=function(){var e=Object(C.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(it());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:ct.a.menu},r.a.createElement("nav",null,r.a.createElement("ul",{className:ct.a.nav_list},r.a.createElement("li",{className:"".concat(ct.a.nav_element)},r.a.createElement(l.c,{to:"/profile",exact:!0,className:"text text_type_main-medium ".concat(ct.a.nav_link),activeClassName:ct.a.active_nav_link},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),r.a.createElement("li",{className:"".concat(ct.a.nav_element)},r.a.createElement(l.c,{to:"/profile/orders",exact:!0,className:"text text_type_main-medium ".concat(ct.a.nav_link),activeClassName:ct.a.active_nav_link},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("li",{className:"".concat(ct.a.nav_element)},r.a.createElement("button",{className:"text text_type_main-medium ".concat(ct.a.nav_button),onClick:function(){a().then(function(){T("token","",{expires:-1}),e.replace({pathname:"/login"})})}},"\u0412\u044b\u0445\u043e\u0434")))),r.a.createElement("p",{className:"".concat(ct.a.info," text text_type_main-default text_color_inactive")},"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"))}var ot=function(){return function(e){e({type:ce,isAuth:!1,isAuthChecked:!1}),A("".concat(k,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+L("token")}}).then(function(t){return e(function(e){return{type:ie,user:e.user,isAuth:!0,isAuthChecked:!0,isLogoutChecked:!0}}(t))}).catch(function(t){return e({type:se,isAuth:!1,isAuthChecked:!0,isLogoutChecked:!0})})}},lt=function(e){return function(t){t({type:oe}),A("".concat(k,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+L("token")},body:JSON.stringify(e)}).then(function(e){return t(function(e){return{type:le,user:e.user}}(e))}).catch(function(e){return t({type:ue})})}};function ut(){var e=r.a.useState(""),t=Object(b.a)(e,2),a=t[0],c=t[1],i=r.a.useState(""),s=Object(b.a)(i,2),o=s[0],l=s[1],d=m(function(e){return e.auth.user});Object(n.useEffect)(function(){d&&(l(d.email),c(d.name))},[d]);var _=r.a.useState(""),p=Object(b.a)(_,2),E=p[0],g=p[1],h=Object(n.useRef)(null),v=function(){W(!0)},O=Object(n.useState)(!1),N=Object(b.a)(O,2),k=N[0],j=N[1],S=Object(n.useState)(!1),T=Object(b.a)(S,2),L=T[0],A=T[1],w=Object(n.useState)(!1),R=Object(b.a)(w,2),F=R[0],D=R[1],M=Object(n.useState)(!1),B=Object(b.a)(M,2),P=B[0],U=B[1],G=Object(n.useState)(!1),z=Object(b.a)(G,2),J=z[0],W=z[1],V=u();function X(){a.length>=2&&a.length<21?j(!1):(j(!0),U(!0))}function Y(){I.test(o)?A(!1):(A(!0),U(!0))}function Q(){E.length>=8&&E.length<21?D(!1):(D(!0),U(!0))}function q(){A(!1)}function H(){j(!1)}function K(){D(!1)}Object(n.useEffect)(function(){U(!!(k||L||F))},[k,L,F]);var Z=function(){var e=Object(C.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(lt(t));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(C.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),X(),Y(),Q(),Z({name:a,email:o,password:E}).then(function(){W(!1)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:nt.a.main},r.a.createElement(st,null),r.a.createElement("form",{className:y.a.form,action:"",onSubmit:$},r.a.createElement("fieldset",{className:y.a.fieldset},r.a.createElement(f.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){W(!0),c(e.target.value)},onFocus:H,onBlur:X,icon:"EditIcon",value:a,name:"name",error:k,ref:h,onIconClick:v,errorText:"\u0414\u043b\u0438\u043d\u0430 \u0438\u043c\u0435\u043d\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0442 2 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",size:"default"}),r.a.createElement(f.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){W(!0),l(e.target.value)},onFocus:q,onBlur:Y,icon:"EditIcon",value:o,name:"email",error:L,ref:h,onIconClick:v,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",size:"default"}),r.a.createElement(f.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){W(!0),g(e.target.value)},onFocus:K,onBlur:Q,icon:"EditIcon",value:E,name:"name",error:F,ref:h,onIconClick:v,errorText:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 8 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",size:"default"})),r.a.createElement("div",{className:"".concat(nt.a.buttons_wrapper," ").concat(J?nt.a.buttons_wrapper_visible:null)},r.a.createElement(f.Button,{type:"secondary",size:"medium",onClick:function(e){e.preventDefault(),q(),H(),K(),P||(c(a),l(o),g(""),W(!1))}},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(f.Button,{type:"primary",size:"medium",disabled:P},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}var mt=a(88),dt=a.n(mt),_t=a(62),pt=a.n(_t),ft=function(e){var t=e.ingredient;if(null===t)return r.a.createElement("img",{className:pt.a.image,src:"https://code.s3.yandex.net/react/code/bun-02.png"});var a,n=m(function(e){return e.allIngredients.items}),c=m(function(e){return e.allIngredients.isLoading});return null!=n&&(a=n.find(function(e){return e._id===t})),r.a.createElement(r.a.Fragment,null,c&&!n&&r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435..."),n&&a&&r.a.createElement("div",{className:pt.a.image_wrapper},r.a.createElement("img",{className:pt.a.image,src:a.image})))},Et=a(36),gt=a.n(Et),ht=(a(111),a(29)),bt=a.n(ht),vt=function(e){var t=e.order;gt.a.locale("ru",{calendar:{lastDay:"[\u0412\u0447\u0435\u0440\u0430,] LT",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f,] LT",sameElse:"DD/MM/YYYY"}});var a,n=t.number,c=Date.parse(t.createdAt),i=t.name,s=t.ingredients,o=t._id;a=s.length<5?s:s.slice(0,5);var u=m(function(e){return e.allIngredients.items});if(!u)return r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...");var _=[];s.forEach(function(e){var t=u.find(function(t){return t._id===e});t&&_.push(t.price)});var p=_.reduce(function(e,t){return e+t},0),E=Object(d.h)(),g=Object(d.j)().path;return r.a.createElement(l.b,{className:bt.a.link,to:{pathname:"".concat(g,"/").concat(o),state:{background:E}}},r.a.createElement("article",{className:bt.a.card},r.a.createElement("div",{className:bt.a.order_data},r.a.createElement("span",{className:"text text_type_digits-default"},"#",n),r.a.createElement("time",{className:"text text_type_main-default text_color_inactive"},"".concat(gt()(c).utcOffset("+03:00").calendar()," i-GMT+3"))),r.a.createElement("h2",{className:"text text_type_main-medium ".concat(bt.a.order_header)},i),r.a.createElement("div",{className:bt.a.ingredients_and_cost},r.a.createElement("div",{className:bt.a.ingredients},a.map(function(e,t){return r.a.createElement(ft,{key:t,ingredient:e})})," ",s.length>5&&r.a.createElement("div",{className:bt.a.rest_ingredients},r.a.createElement("div",{className:"text text_type_main-default ".concat(bt.a.additional_quantity)},"+",s.length-5),r.a.createElement("div",{className:bt.a.shadow},r.a.createElement(ft,{ingredient:s[5]})))),r.a.createElement("div",{className:bt.a.cost_area},r.a.createElement("div",{className:"text text_type_digits-default"},p),r.a.createElement(f.CurrencyIcon,{type:"primary"})))))},yt="WS_CONNECTION_START",Ot="WS_CONNECTION_START_WITH_TOKEN",xt="WS_CONNECTION_SUCCESS",Nt="WS_CONNECTION_ERROR",Ct="WS_CONNECTION_CLOSED",kt="WS_GET_MESSAGE",jt="WS_RESET_ERROR",It={wsInit:yt,wsInitWithToken:Ot,onOpen:xt,onClose:Ct,onError:Nt,onMessage:kt,wsResetError:jt};function St(e){return{type:Ot,payload:e}}function Tt(){var e=u(),t=L("token"),a=m(function(e){return e.ws}),c=a.orders;a.wsConnected,a.total,a.totalToday;return Object(n.useEffect)(function(){return e(St("".concat(j,"/orders?token=").concat(t))),function(){e({type:Ct})}},[e,t]),c?r.a.createElement("main",{className:dt.a.main},r.a.createElement(st,null),r.a.createElement("section",{className:dt.a.order_feed},c.map(function(e){return r.a.createElement(vt,{key:e._id,order:e})}))):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")}var Lt=a(24),At=a.n(Lt);function wt(){var e=Object(d.i)().id,t=m(function(e){return e.allIngredients.items});if(!t)return r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...");var a=t.find(function(t){return t._id===e});return r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435..."),a&&r.a.createElement("article",{className:At.a.card},r.a.createElement("img",{className:At.a.image,src:a.image_large}),r.a.createElement("h4",{className:"mt-4 mb-8 text text_type_main-medium"},a.name),r.a.createElement("ul",{className:"mb-15 ".concat(At.a.nutritionalValue)},r.a.createElement("li",{className:"text text_type_main-default text_color_inactive ".concat(At.a.component)},r.a.createElement("p",{className:At.a.componentName},"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"),r.a.createElement("span",{className:"text_type_digits-default"},a.calories)),r.a.createElement("li",{className:"text text_type_main-default text_color_inactive ".concat(At.a.component)},r.a.createElement("p",{className:At.a.componentName},"\u0411\u0435\u043b\u043a\u0438, \u0433"),r.a.createElement("span",{className:"text_type_digits-default"},a.proteins)),r.a.createElement("li",{className:"text text_type_main-default text_color_inactive ".concat(At.a.component)},r.a.createElement("p",{className:At.a.componentName},"\u0416\u0438\u0440\u044b, \u0433"),r.a.createElement("span",{className:"text_type_digits-default"},a.fat)),r.a.createElement("li",{className:"text text_type_main-default text_color_inactive ".concat(At.a.component)},r.a.createElement("p",{className:At.a.componentName},"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"),r.a.createElement("span",{className:"text_type_digits-default"},a.carbohydrates)))))}function Rt(){var e=m(function(e){return e.allIngredients.items}),t=Object(d.g)();Object(n.useCallback)(function(){t.replace({pathname:"/"})},[t]);return e?r.a.createElement("main",null,r.a.createElement(wt,null)):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")}var Ft=a(30),Dt=a.n(Ft),Mt=a(89),Bt=a.n(Mt),Pt=function(e){var t=e.status,a=m(function(e){return e.ws}).orders,n=[],c=[];return a?(a.forEach(function(e){"done"===e.status?n.push(e.number):c.push(e.number)}),r.a.createElement("div",{className:Bt.a.orders_list},"done"===t&&n.map(function(e){return r.a.createElement("span",{key:e,className:"text text_type_digits-default ".concat(Bt.a.order_done)},"#",e)}),c.map(function(e){return r.a.createElement("span",{key:e,className:"text text_type_digits-default"},"#",e)}))):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")};function Ut(){var e=u(),t=m(function(e){return e.ws}),a=t.orders,c=t.wsConnected,i=t.total,s=t.totalToday,o=t.error;Object(n.useCallback)(function(){e({type:Nt})},[e]);return Object(n.useEffect)(function(){return e({type:yt}),function(){e({type:Ct})}},[e]),o&&e({type:jt}),r.a.createElement("main",{className:Dt.a.main},r.a.createElement("h1",{className:Dt.a.header},"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),!c&&r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435..."),c&&a&&r.a.createElement("div",{className:Dt.a.columns},r.a.createElement("section",{className:Dt.a.order_feed},a.map(function(e){return r.a.createElement(vt,{key:e._id,order:e})})),r.a.createElement("section",{className:Dt.a.orders_info},r.a.createElement("div",{className:Dt.a.status},r.a.createElement("div",{className:Dt.a.status_ready},r.a.createElement("p",{className:"text text_type_main-medium"},"\u0413\u043e\u0442\u043e\u0432\u044b:"),r.a.createElement(Pt,{status:"done"})),r.a.createElement("div",{className:Dt.a.status_in_progress},r.a.createElement("p",{className:"text text_type_main-medium"},"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"),r.a.createElement(Pt,null))),r.a.createElement("div",{className:Dt.a.complete_all},r.a.createElement("p",{className:"text text_type_main-medium"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:"),r.a.createElement("span",{className:"text text_type_digits-large"},i)),r.a.createElement("div",{className:Dt.a.complete_today},r.a.createElement("p",{className:"text text_type_main-medium"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"),r.a.createElement("span",{className:"text text_type_digits-large"},s)))))}var Gt=a(122),zt=a.n(Gt),Jt=a(31),Wt=a.n(Jt),Vt=a(63),Xt=a.n(Vt),Yt=function(e){var t=e.ingredient,a=e.order,n=e.amount,c=(a.number,m(function(e){return e.allIngredients.items}));if(!c)return r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...");var i=c.find(function(e){return e._id===t}),s=i.name,o=i.price;return r.a.createElement("div",{className:Xt.a.card},r.a.createElement(ft,{ingredient:t}),r.a.createElement("p",{className:"text text_type_main-default ".concat(Xt.a.name)},s),r.a.createElement("div",{className:Xt.a.amount_and_price},r.a.createElement("span",{className:"text text_type_digits-default"},n),r.a.createElement("span",{className:"text text_type_digits-default"},"x"),r.a.createElement("span",{className:"text text_type_digits-default"},o),r.a.createElement(f.CurrencyIcon,{type:"primary"})))};function Qt(){gt.a.locale("ru",{calendar:{lastDay:"[\u0412\u0447\u0435\u0440\u0430,] LT",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f,] LT",sameElse:"DD/MM/YYYY"}});var e=Object(d.i)().id,t=(u(),m(function(e){return e.allIngredients.items})),a=m(function(e){return e.ws.orders});if(!a)return r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...");var n=a.find(function(t){return t._id===e});if(void 0===n)return r.a.createElement("p",{className:"text text_type_main-medium"},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0442\u0430\u043a\u043e\u0439 \u0437\u0430\u043a\u0430\u0437...");var c=n.number,i=n.ingredients,s=n.name,o=Date.parse(n.createdAt),l=n.status,_=w[l],p={};Object(N.a)({},i);null!==i&&i.forEach(function(e){null!==e&&(p[e]?p[e]+=1:p[e]=1)});var E=Object.entries(p),g=[];null!==t&&i.forEach(function(e){var a=t.find(function(t){return t._id===e});a&&g.push(a.price)});var h=g.reduce(function(e,t){return e+t},0);return a&&t?r.a.createElement("section",{className:Wt.a.card},r.a.createElement("span",{className:"text text_type_digits-default ".concat(Wt.a.number)},"#",c),r.a.createElement("h2",{className:"text text_type_main-medium ".concat(Wt.a.order_header)},s),r.a.createElement("span",{className:"text text_type_main-default ".concat(Wt.a.status)},_),r.a.createElement("div",{className:Wt.a.composition},r.a.createElement("span",{className:"text text_type_main-medium"},"\u0421\u043e\u0441\u0442\u0430\u0432:"),r.a.createElement("div",{className:Wt.a.ingredients_area},E.map(function(e){return r.a.createElement(Yt,{key:e[0],order:n,ingredient:e[0],amount:e[1]})}))),r.a.createElement("div",{className:Wt.a.time_and_cost},r.a.createElement("time",{className:"text text_type_main-default text_color_inactive"},"".concat(gt()(o).utcOffset("+03:00").calendar()," i-GMT+3")),r.a.createElement("div",{className:Wt.a.cost_field},r.a.createElement("div",{className:"text text_type_digits-default"},h),r.a.createElement(f.CurrencyIcon,{type:"primary"})))):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")}var qt=function(e){var t=e.secured,a=m(function(e){return e.allIngredients.items}),c=Object(d.g)(),i=(Object(n.useCallback)(function(){c.replace({pathname:"/feed"})},[c]),L("token")),s=u();return Object(n.useEffect)(function(){s(t?St("".concat(j,"/orders?token=").concat(i)):{type:yt})},[s,i]),a?r.a.createElement("main",{className:zt.a.main},r.a.createElement(Qt,null)):r.a.createElement("p",{className:"text text_type_main-medium"},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435...")},Ht=a(64),Kt=a.n(Ht);function Zt(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:Kt.a.main},r.a.createElement("h1",{className:"text text_type_main-large ".concat(Kt.a.title)},"\u041e\u0443\u0443\u0443, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",r.a.createElement("span",null,"\ud83c\udf20")),r.a.createElement("a",{className:Kt.a.rights_link,href:"https://ru.freepik.com/photos/background"},"Background \u0444\u043e\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043d(\u0430) kjpargeter - ru.freepik.com")))}var $t=function(){return function(e){e({type:R,isLoading:!0,isFailed:!1}),fetch("".concat(k,"/ingredients")).then(function(e){return S(e)}).then(function(t){var a;e((a=t.data,{type:F,isLoading:!1,isFailed:!1,items:a}))}).catch(function(t){return e({type:D,isLoading:!1,isFailed:!0})})}};var ea,ta,aa=function(){var e=u();Object(n.useEffect)(function(){e($t())},[]),Object(n.useEffect)(function(){e(ot())},[]),m(function(e){return e.allIngredients.items});var t=Object(d.g)(),a=Object(n.useCallback)(function(){t.replace({pathname:"/"})},[t]),c=Object(n.useCallback)(function(){t.goBack()},[t]),i=Object(d.h)(),s=(i.state||{location:i}).background;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement(d.d,{location:s},r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(qe,null)),r.a.createElement(d.b,{path:"/login",exact:!0},r.a.createElement(de,null)),r.a.createElement(d.b,{path:"/register"},r.a.createElement(Ke,null)),r.a.createElement(d.b,{path:"/forgot-password"},r.a.createElement(et,null)),r.a.createElement(d.b,{path:"/reset-password"},r.a.createElement(tt,null)),r.a.createElement(d.b,{path:"/feed",exact:!0},r.a.createElement(Ut,null)),r.a.createElement(d.b,{path:"/feed/:id",exact:!0},r.a.createElement(qt,{secured:!1})),r.a.createElement(h,{path:"/profile",exact:!0},r.a.createElement(ut,null)),r.a.createElement(h,{path:"/profile/orders",exact:!0},r.a.createElement(Tt,null)),r.a.createElement(h,{path:"/profile/orders/:id",exact:!0},r.a.createElement(qt,{secured:!0})),r.a.createElement(d.b,{path:"/ingredients/:id",exact:!0},r.a.createElement(Rt,null)),r.a.createElement(d.b,null,r.a.createElement(Zt,null))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{path:"/ingredients/:id",children:r.a.createElement(Ge,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:a},r.a.createElement(wt,null))}),r.a.createElement(d.b,{path:"/feed/:id",children:r.a.createElement(Ge,{title:"",onClose:c},r.a.createElement(Qt,null))}),r.a.createElement(d.b,{path:"/profile/orders/:id",children:r.a.createElement(Ge,{title:"",onClose:c},r.a.createElement(Qt,null))})))},na=a(124),ra=a(33),ca={isLoading:!1,isFailed:!1,items:[]},ia={isOrderModalClosed:!0,isOrderSent:!1,isOrderRejected:!1,number:null},sa=a(27),oa=a(123),la=a.n(oa),ua={ingredients:{bun:null,fillings:[]},ingredientsCount:[]},ma={isLoading:!1,isFailed:!1,user:null,accessToken:null,isAuth:!1,isAuthChecked:!1,isLogoutChecked:!1},da={wsConnected:!1,orders:null,total:null,totalToday:null,error:void 0},_a=Object(ra.b)({allIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed});case F:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,items:t.items});case D:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(N.a)({},e,{isOrderModalClosed:t.isOrderModalClosed,isOrderSent:t.isOrderSent,isOrderRejected:t.isOrderRejected});case Y:return Object(N.a)({},e,{isOrderModalClosed:t.isOrderModalClosed,isOrderSent:t.isOrderSent,isOrderRejected:t.isOrderRejected,number:t.number});case Q:return Object(N.a)({},e,{isOrderModalClosed:t.isOrderModalClosed,isOrderSent:t.isOrderSent,isOrderRejected:t.isOrderRejected});case q:return Object(N.a)({},e,{isOrderModalClosed:t.isOrderModalClosed,number:t.number});default:return e}},constructorIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var a=Object(sa.a)(e.ingredientsCount),n=a.findIndex(function(e){return e.itemId===t.item._id}),r=a[n];return-1===n?a.push({itemId:t.item._id,count:1}):a.splice(n,1,{itemId:r.itemId,count:r.count+1}),Object(N.a)({},e,{ingredients:"bun"===t.item.type?{bun:t.item,fillings:Object(sa.a)(e.ingredients.fillings)}:Object(N.a)({},e.ingredients,{fillings:[].concat(Object(sa.a)(e.ingredients.fillings),[Object(N.a)({},t.item,{uId:t.uId})])}),ingredientsCount:"bun"===t.item.type?Object(sa.a)(e.ingredientsCount):a});case P:var c=Object(sa.a)(e.ingredients.fillings);c.splice(t.key,1);var i=Object(sa.a)(e.ingredientsCount),s=i.findIndex(function(e){return e.itemId===t.item._id}),o=i[s];return 1===o.count?i.splice(s,1):i.splice(s,1,{itemId:o.itemId,count:o.count-1}),Object(N.a)({},e,{ingredients:Object(N.a)({},e.ingredients,{fillings:c}),ingredientsCount:i});case M:return Object(N.a)({},e,{ingredients:Object(N.a)({},e.ingredients,{fillings:la()(e.ingredients.fillings,{$splice:[[t.dragIndex,1],[t.hoverIndex,0,e.ingredients.fillings[t.dragIndex]]]})})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,isAuth:t.isAuth});case ne:return localStorage.setItem("refreshToken",t.refreshToken),T("token",t.accessToken.split("Bearer ")[1]),Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,user:t.user,accessToken:t.accessToken,isAuth:t.isAuth});case re:case U:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,isAuth:t.isAuth});case G:return T("token",t.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",t.refreshToken),Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,user:t.user,accessToken:t.accessToken,isAuth:t.isAuth,isLogoutChecked:t.isLogoutChecked});case z:return Object(N.a)({},e,{isLoading:t.isLoading,isFailed:t.isFailed,isAuth:t.isAuth,isLogoutChecked:t.isLogoutChecked});case H:case K:case Z:case $:case ee:case te:return Object(N.a)({},e);case ce:return Object(N.a)({},e,{isAuth:t.isAuth,isAuthChecked:t.isAuthChecked});case ie:return Object(N.a)({},e,{user:t.user,isAuth:t.isAuth,isAuthChecked:t.isAuthChecked,isLogoutChecked:t.isLogoutChecked});case se:return Object(N.a)({},e,{isAuth:t.isAuth,isAuthChecked:t.isAuthChecked,isLogoutChecked:t.isLogoutChecked});case oe:return Object(N.a)({},e);case le:return Object(N.a)({},e,{user:t.user});case ue:return Object(N.a)({},e);case J:return Object(N.a)({},e,{isLogoutChecked:t.isLogoutChecked});case W:return Object(N.a)({},e,{user:t.user,accessToken:t.accessToken,isAuth:t.isAuth,isAuthChecked:t.isAuthChecked,isLogoutChecked:t.isLogoutChecked});case V:return Object(N.a)({},e,{isLogoutChecked:t.isLogoutChecked});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return Object(N.a)({},e,{wsConnected:!0,error:void 0});case Nt:return Object(N.a)({},e,{wsConnected:!1,error:t.payload});case Ct:return Object(N.a)({},e,{wsConnected:!1,error:void 0});case kt:var a=t.payload.orders,n=[];return a.forEach(function(e){e.ingredients.includes(null)||n.push(e)}),Object(N.a)({},e,{orders:n,total:t.payload.total,totalToday:t.payload.totalToday,error:void 0});default:return e}}}),pa=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ra.c)(Object(ra.a)(na.a,(ea="wss://norma.nomoreparties.space/orders/all",ta=It,function(e){var t=null;return function(a){return function(n){var r=e.dispatch,c=n.type,i=n.payload,s=ta.wsInit,o=ta.wsInitWithToken,l=ta.onOpen,u=ta.onClose,m=ta.onError,d=ta.onMessage;c===s&&(t=new WebSocket("".concat(ea))),c===o&&(t=new WebSocket(i)),c===u&&null!==t&&t.close(),t&&(t.onopen=function(e){r({type:l,payload:e})},t.onerror=function(e){r({type:m,payload:e})},t.onmessage=function(e){var t=e.data,a=JSON.parse(t),n=(a.success,Object(g.a)(a,["success"]));r({type:d,payload:n})},t.onclose=function(e){r({type:u,payload:e})}),a(n)}}}))),fa=Object(ra.d)(_a,pa);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:fa},r.a.createElement(l.a,null,r.a.createElement(aa,null)))),document.getElementById("root")),s()},28:function(e,t,a){e.exports={header:"app-header_header__3aP_-",menu:"app-header_menu__BYcXU",menuLeftColumn:"app-header_menuLeftColumn__1efEX",logo:"app-header_logo__3FgJz",link:"app-header_link__JBl_Q",active_nav_link:"app-header_active_nav_link__k6UU1"}},29:function(e,t,a){e.exports={card:"order-card_card__5vAta",link:"order-card_link__3QCzm",order_data:"order-card_order_data__4qZ9F",order_header:"order-card_order_header__TaRvi",ingredients_and_cost:"order-card_ingredients_and_cost__-LTFd",cost_area:"order-card_cost_area__3XhEf",ingredients:"order-card_ingredients__1Etwo",rest_ingredients:"order-card_rest_ingredients__1DWSP",additional_quantity:"order-card_additional_quantity__2tzhH",shadow:"order-card_shadow__1EyLz"}},30:function(e,t,a){e.exports={main:"feed-page_main__3_cYV",columns:"feed-page_columns__3t9Jg",header:"feed-page_header__R6kvb",status:"feed-page_status__ARIlh",order_feed:"feed-page_order_feed__22U_n",orders_info:"feed-page_orders_info__1Bsqi"}},31:function(e,t,a){e.exports={card:"full-order-card_card__3EEFH",number:"full-order-card_number__YKf5X",order_header:"full-order-card_order_header__2n5IA",status:"full-order-card_status__-BHPG",composition:"full-order-card_composition__3LyrC",ingredients_area:"full-order-card_ingredients_area__ksprE",time_and_cost:"full-order-card_time_and_cost__3nLV3",cost_field:"full-order-card_cost_field__58bij"}},38:function(e,t,a){e.exports={card:"draggable-ingredient_card__22tkQ",link:"draggable-ingredient_link__3bQE4",image:"draggable-ingredient_image__1m-FI",priceArea:"draggable-ingredient_priceArea__3AhhM",price:"draggable-ingredient_price__1BTka",title:"draggable-ingredient_title__3f5eQ"}},39:function(e,t,a){e.exports={section:"burger-constructor_section__1Oj45",compositionArea:"burger-constructor_compositionArea__ZJMAt",compositionChangebleList:"burger-constructor_compositionChangebleList__iML4F burger-constructor_compositionArea__ZJMAt",info:"burger-constructor_info__3KXnR",priceArea:"burger-constructor_priceArea__wz5I3",currentIcon:"burger-constructor_currentIcon__2Jfmy"}},48:function(e,t,a){e.exports={card:"order-details_card__5QrrG",orderId:"order-details_orderId__Gi4mV",image:"order-details_image__16IXB",info:"order-details_info__m5bOg"}},58:function(e,t,a){e.exports={section:"burger-ingredients_section__3F4Wu",menu:"burger-ingredients_menu__1eRvv",ingredients:"burger-ingredients_ingredients__3U86K"}},60:function(e,t,a){e.exports={modal:"modal_modal__3B1Cq",header:"modal_header__3F4Ga",title:"modal_title__2uJj5",someContainer:"modal_someContainer__3i7LI"}},61:function(e,t,a){e.exports={main:"profile-page_main__1MRdP",buttons_wrapper:"profile-page_buttons_wrapper__jld7X",buttons_wrapper_visible:"profile-page_buttons_wrapper_visible__2C3bv"}},62:function(e,t,a){e.exports={image_wrapper:"ingredient-mini_image_wrapper__3dVNp",image:"ingredient-mini_image__1Z29U"}},63:function(e,t,a){e.exports={card:"ingredient-card_card__1JmUJ",name:"ingredient-card_name__zkStK",amount_and_price:"ingredient-card_amount_and_price__1PBaa"}},64:function(e,t,a){e.exports={main:"not-found-page_main__1GN0c",title:"not-found-page_title__15PMT",cover_image:"not-found-page_cover_image__3QmoR",rights_link:"not-found-page_rights_link__MJLTk"}},88:function(e,t,a){e.exports={main:"orders-page_main__1MQUZ",order_feed:"orders-page_order_feed__35INb"}},89:function(e,t,a){e.exports={orders_list:"orders-list_orders_list__1u5rk",order_done:"orders-list_order_done__3t-Vl"}},9:function(e,t,a){e.exports={main:"inputs-pages_main__gINzV",form:"inputs-pages_form__1eMjc",fieldset:"inputs-pages_fieldset__1zPkX",additional_actions:"inputs-pages_additional_actions__tuMEw",additional_action:"inputs-pages_additional_action__2ANpo"}}},[[127,3,2]]]);
//# sourceMappingURL=main.b701a8fc.chunk.js.map